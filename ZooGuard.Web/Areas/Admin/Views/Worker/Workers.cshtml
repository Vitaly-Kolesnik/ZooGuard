@model IList<ZooGuard.Core.Entities.WorkerEntities.Worker>
@{
    ViewData["Title"] = "Worker Table";
}

@await Html.PartialAsync("WorkerNavBarPartial")

<div class = "tabs">

    @await Html.PartialAsync("WorkerMarkPartial")

<table class="table table-hover">

    @await Html.PartialAsync("WorkerTheadTablePartial")

<tbody>    
        @foreach(var line in @Model)
        {
            <tr class="row-table table-light">
                <th scope="row" class="border-top -0 border-info border-left"><i class="fa fa-times fa-lg btn btn-danger alert-secondary"></i>&ensp;&ensp;<i class="fa fa-pencil fa-lg btn btn-info alert-secondary"></i></th>
                <td><button type="submit" class="btn btn-info">@line.Name @line.LastName @line.Patronymic</button></td>
            
                if(@line.SpecialitiesOfWorkers.Count() == 1) 
                {
                    <td>@line.SpecialitiesOfWorkers.Select(p => p.SpecialityWorker.Name)</td>
                }
                else
                {
                    <td><button type="submit" class="btn btn-info">Speciality(@line.SpecialitiesOfWorkers.Count())</button></td>
                }
            
                <td>@line.Place.Name</td>
            
                if(@line.WorkersInCompanies.Count() == 1) 
                {
                    <td><button type="submit" class="btn btn-info">@line.WorkersInCompanies.Select(p => p.Company.Name)</button></td>
                }
                else
                {
                    <td><button type="submit" class="btn btn-info">Companies(@line.WorkersInCompanies.Count())</button></td>
                }
            
                if(@line.WorkersInProjects.Count() == 1) 
                {
                    <td><button type="submit" class="btn btn-info">@line.WorkersInProjects.Select(p => p.Project.Name)</button></td>
                }
                else
                {
                    <td><button type="submit" class="btn btn-info">Companies(@line.WorkersInProjects.Count())</button></td>
                }
            
                @if(@line.Positions.Count() == 0)
                {
                    <td><button type="submit" class="btn btn-secondary" disabled>Positions (@line.Positions.Count())</button></td>
                }
                else
                {
                    <td><button type="submit" class="btn btn-info">Positions (@line.Positions.Count())</button></td>
                }

                @if(@line.Storages.Count() == 0)
                {
                    <td><button type="submit" class="btn btn-secondary" disabled>Storages (@line.Storages.Count())</button></td>
                }
                else
                {
                    <td><button type="submit" class="btn btn-info">Storages (@line.Storages.Count())</button></td>
                }

                @if(@line.ServerRooms.Count() == 0)
                {
                    <td class="border-info border-right"><button type="submit" class="btn btn-secondary" disabled>Server Rooms (@line.ServerRooms.Count())</button></td>
                }
                else
                {
                    <td class="border-info border-right"><button type="submit" class="btn btn-info">Server Rooms (@line.ServerRooms.Count())</button></td>
                }
            </tr>
        }
</tbody>
</table>
</div>
