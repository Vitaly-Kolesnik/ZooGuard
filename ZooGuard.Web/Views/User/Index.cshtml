@model IList<ZooGuard.Core.Entities.User>
@{
    ViewData["Title"] = "GetAllUsersInDataBase"; @*Установление ключа Title для контроллера*@
}

<div class="text-center">
    <h3>Users</h3>
</div>
 
<div class="form-group">
   <a class="nav-link text-dark" asp-area="" asp-action = "GetUserForm" asp-controller="User"><input type="submit" value="Add User" class="btn btn-primary" /></a>
</div>
<table class="table">
	<thead>
		<tr>
			<th>First Name</th>
			<th>Last Name</th>
			<th>Email</th>
			<th>Phone</th>
			<th>Project</th>
            <th>Role</th>
            <th>All Position</th>
            <th>Edit user</th>
            <th>Delete user</th>
		</tr>
	</thead>
	<tbody>
		@foreach (ZooGuard.Core.Entities.User User  in Model) {
        <tr>
			<td><a href="~/User/Profile/@User.Id"/><input type="submit" value="@User.Name" class="btn btn-primary"/></td>
			<td>@User.LastName</td>
			<td>@User.Email</td>
			<td>@User.Phone</td>
			<td>@User.Project</td>
                <td> @if(User.Members.Count() > 1 )
                    {
                        <div class="dropdown">
                        <p class="dropbtn"> Roles </p>
                        <div class="dropdown-content">
                            @foreach(string r in @User.Members.Select(p => p.Role.Name) ) {
                                <p>@r</p> 
                                }
                        </div>
                        </div>
                    } else{
                        <p>@User.Members.Single().Role.Name</p>
                    }
           </td>
           <td><a href="~/Position/By/User/@User.Id"/><input type="submit" value="all Positions" class="btn btn-primary" /></td>
           <td> <a href="~/User/Edit/@User.Id"/> <input type="submit" value="Edit" class="btn btn-primary" /></td>
          <td> <a href="~/User/Delete/@User.Id"/> <input type="submit" value="Delete" class="btn btn-primary" /></td>
		</tr>
        }
	</tbody>
</table>
        
